<script>
/* The Minimized Vanilla JavaScript
 * Copyright (C) 2021 Muhammad - All Right Reserved
 *
 * Unauthorized copying of this file, via any 
 * medium is strictly prohibited.
 *
 * Proprietary and confidential
 * 
 * Written by Muhammad Bin Zafar <midnqp@gmail.com>, August 2021
 */
const doc = document
doc.orsc = doc.onreadystatechange
doc.ce = doc.createElement
doc.gebi = doc.getElementById
doc.gebtn = doc.getElementByTagName

doc.qs = doc.querySelector
doc.qsa = doc.querySelectorAll

doc.addEv = function(elem, eventName, callback) {
    elem.addEventListener(eventName, callback)
}


// Deploy as many as possible in a loop
const ajax = async function(url, callback=()=>{}, data={}) {
	let type
	if (Object.keys(data).length === 0)	type='GET'
	else type = 'POST'

	let xhr = new XMLHttpRequest()
	xhr.open(type, url)
	
	xhr.onreadystatechange = ()=>{
		if (xhr.readyState === 4) {
			ajax3.response = xhr.response
			ajax3.url = url
			callback()
		}
	}
	
	if (type === 'GET') xhr.send()
	else if (type === 'POST') 
		xhr.send(JSON.stringify(data))
}




const ajax2 = async function(url, data={}) {
	__promiseAjax__.data = data
	__promiseAjax__.url = url

	return new Promise(__promiseAjax__)
}


// This is a helper-function entity.
const __promiseAjax__ = function(RETURN, REJECT) {
	let xhr = new XMLHttpRequest()
	let data
	if (typeof __promiseAjax__.data === 'undefined') 
		data = {}
	else data = __promiseAjax__.data

	url = __promiseAjax__.url
	__promiseAjax__.URL = url
	__promiseAjax__.XHR = xhr
	
	if (isEmpty(data)) type= 'GET'
	else type='POST'
	xhr.open(type, url)

	xhr.srh = xhr.setRequestHeader
	xhr.grh = xhr.getResponseHeader
	xhr.garh = xhr.getAllResponseHeaders

	xhr.onreadystatechange = function() {
		if (xhr.readyState === 4) 
			RETURN(xhr.response)
	}
	if (type==='POST') xhr.send(JSON.stringify(data))
	else if (type === 'GET') xhr.send()
}








function isEmpty(obj) {
	return Object.keys(obj).length === 0;
}
</script>
