<script>
console.log(`
/** The Minimized Vanilla JavaScript
  * Copyright (C) 2021 Muhammad <midnqp@gmail.com>
  *
  * Last updated: 210921 2145
  */
`)
const doc = document
doc.orsc = doc.onreadystatechange
doc.ce = doc.createElement
doc.gebi = doc.getElementById
doc.gebtn = doc.getElementByTagName

doc.qs = doc.querySelector
doc.qsa = doc.querySelectorAll

doc.addEv = function(elem, eventName, callback) {
    elem.addEventListener(eventName, callback)
}


// Deploy as many as possible in a loop
const ajax = async function(url, callback=()=>{console.log(ajax.response)}, data={}) {
	let type
	if (isEmpty(data))	type='GET'
	else type = 'POST'

	let xhr = new XMLHttpRequest()
	xhr.open(type, url)
	xhr.setRequestHeader('Content-type', 'application/json')
	
	xhr.onreadystatechange = ()=>{
		if (xhr.readyState === 4) {
			ajax.response = xhr.response
			ajax.url = url
			callback()
		}
	}
	
	if (type === 'GET') 
		xhr.send()
	else if (type === 'POST') 
		xhr.send(JSON.stringify(data))
}








// This is a helper-function entity.
const __promiseAjax__ = function(RETURN, REJECT) {
	let data
	if (typeof __promiseAjax__.data === 'undefined') 
		data = {}
	else 
		data = __promiseAjax__.data
	
	let type
	if (isEmpty(data)) type= 'GET'
	else type='POST'


	let url = __promiseAjax__.url
	__promiseAjax__.URL = url
	__promiseAjax__.XHR = xhr
	
	let xhr = new XMLHttpRequest()
	xhr.open(type, url)
	xhr.srh = xhr.setRequestHeader
	xhr.srh('Content-type', 'application/json')
	xhr.grh = xhr.getResponseHeader
	xhr.garh = xhr.getAllResponseHeaders

	xhr.onreadystatechange = function() {
		if (xhr.readyState === 4) 
			RETURN(xhr.response)
	}
	if (type==='POST') xhr.send(JSON.stringify(data))
	else if (type === 'GET') xhr.send()
}




// Maybe we can't deploy as many as possible in a for loop.
// Let's see.
const ajax2 = async function(url, data={}) {
	__promiseAjax__.data = data
	__promiseAjax__.url = url

	return new Promise(__promiseAjax__)
}







function isEmpty(obj) {
	return Object.keys(obj).length === 0;
}
</script>
